       小白Python公式函数说明
     （更新日期：2019-10-22  版本：1.00）

    小白Python公式函数是小白Python金融量化分析回测框架的基本模块之一。
    模块实现了类似大智慧和通达信的函数，方便用户编写、移植大智慧和通达
信自定义股票指标。
 一　、行行情函数
HIGH 最高价
返回该周期最高价。
用法： HIGH

H 最高价
返回该周期最高价。
用法： H

LOW 最低价
返回该周期最低价。
用法： LOW

L 最低价
返回该周期最低价。
用法： L

CLOSE 收盘价
返回该周期收盘价。
用法： CLOSE

C 收盘价
返回该周期收盘价。
用法： C

VOL 成交量量
返回该周期成交量量。
用法： VOL

V 成交量量
返回该周期成交量量。
用法： V

OPEN 开盘价
返回该周期开盘价。
用法： OPEN
O： 开盘价
返回该周期开盘价。
用法： O

二　、时间函数
DATE 日期
取得该周期从1900以来的年月日。
用法： DATE　例例如函数返回1000101，表示2000年年1月1日。

TIME 时间
取得该周期的时分秒。
用法： TIME　函数返回有效值范围为(000000-235959)。

YEAR 年年份
取得该周期的年年份。
用法：YEAR

MONTH 月份
取得该周期的月份。
用法：MONTH　函数返回有效值范围为(1-12)。

WEEK 星期
取得该周期的星期数。
用法： WEEK　函数返回有效值范围为(0-6)，0表示星期天。

DAY 日期
取得该周期的日期。
用法： DAY　函数返回有效值范围为(1-31)。

HOUR 小时
取得该周期的小时数。
用法：HOUR　函数返回有效值范围为(0-23)，对于日线及更更长的分析周期值为0。

MINUTE 分钟
取得该周期的分钟数。
用法：MINUTE　函数返回有效值范围为(0-59)，对于日线及更更长的分析周期值为0。

FROMOPEN 分钟
求当前时刻距开盘有多⻓长时间。
用法：　FROMOPEN　返回当前时刻距开盘有多长时间，单位为分钟。
例例如:　FROMOPEN　当前时刻为早上十点，则返回31

CWEEK 中文星期
取得该周期的星期数。
用法： CWEEK　函数返回有效值范围为，星期日--星期六。

LYEAR 农历年份
取得该周期的农历年份。
用法：LYEAR

LMONTH 月份
取得该周期的农历月份。
用法：MONTH　函数返回有效值范围为(1-12)。

LDAY 农历日期
取得该周期的农历日期。
用法： LDAY　函数返回有效值范围为(1-31)。

三　、引用函数
DRAWNULL 无效数
返回无效数。
用法： DRAWNULL
例例如：　IF(CLOSE>REF(CLOSE，1)，CLOSE，DRAWNULL)　表示下跌时分析图上不不画线。

BARSCOUNT 有效数据周期数
求总的周期数。
用法：　BARSCOUNT(X)　第一个有效数据到当前的天数。
例例如：　BARSCOUNT(CLOSE)　对于日线数据取得上市以来总交易易日数，对于分笔成交取
得当日成交笔数，对于1分钟线取得当日交易易分钟
数。

BARSLAST 上一次条件成立位置
上一次条件成立到当前的周期数。
用法：　BARSLAST(X)　上一次X不不为0到现在的天数。
例例如：　BARSLAST(CLOSE/REF(CLOSE,1)>=1.1)　表示上一个涨停板到
当前的周期数。

BARSSINCE 第一个条件成立位置
第一个条件成立到当前的周期数。
用法：　BARSSINCE(X)　第一次X不不为0到现在的天数。
例例如：　BARSSINCE(HIGH>10)　表示股价超过10元时到当前的周期数。

COUNT 统计
统计满足条件的周期数。
用法：　COUNT(X，N)　统计N周期中满足X条件的周期数，若N=0则从
第一个有效值开始。
例例如：　COUNT(CLOSE>OPEN，20)　表示统计20周期内收阳的周期
数。

DMA 动态移动平均
求动态移动平均。
用法：　DMA(X，A)　求X的动态移动平均。
算法：　若Y=DMA(X，A)则Y=A*X+(1-A)*Y'，其中Y'表示上一周期Y值，A
必须小于1。
例如：　DMA(CLOSE，VOL/CAPITAL)　表示求以换手率作平滑因子的平均价。

HHV 最高值
求最高值。
用法：　HHV(X，N)　求N周期内X最高值，N=0则从第一个有效值开始。
例如：　HHV(HIGH,30)　表示求30日最高价。

HHVBARS 上一高点位置
求上一高点到当前的周期数。
用法：　HHVBARS(X，N)　求N周期内X最高值到当前周期数，N=0表示
从第一个有效值开始统计。
例如：　HHVBARS(HIGH，0)　求得历史新高到到当前的周期数。

LLV 最低值
求最低值。
用法：　LLV(X，N)　求N周期内X最低值，N=0则从第一个有效值开始。
例如：　LLV(LOW，0)　表示求历史最低价。

LLVBARS 上一低点位置
求上一低点到当前的周期数。
用法：　LLVBARS(X，N)　求N周期内X最低值到当前周期数，N=0表示
从第一个有效值开始统计。
例如：　LLVBARS(HIGH，20)　求得20日最低点到当前的周期数。

REVERSE 求相反数
求相反数。
用法：　REVERSE(X)　返回-X。
例如：　REVERSE(CLOSE)　返回-CLOSE。

REF 向前引用
引用若干周期前的数据。
用法：　REF(X，A)　引用A周期前的X值。
例如：　REF(CLOSE，1)　表示上一周期的收盘价，在日线上就是昨收。

REFX 向后引用
引用若干周期后的数据。
用法：　REFX(X，A)　引用A周期后的X值。

SUM 总和
求总和。
用法：　SUM(X，N)　统计N周期中X的总和，N=0则从第一个有效值开始。
例如：　SUM(VOL，0)　表示统计从上市第一天以来的成交量量总和。

FILTER 过滤
过滤连续出现的信号。
用法：　FILTER(X，N)　X满足条件后，删除其后N周期内的数据置为0。
例如：　FILTER(CLOSE>OPEN，5)　查找阳线，5天内再次出现的阳线不不
被记录在内。

TFILTER 过滤连续出现的信号
用法:TFILTER(买入条件,卖出条件,N);过滤掉买入(卖出)信号发出后,下一个反向信号发出前的所有买入(卖出)信号.
N=1表示仅对买入信号过滤;
N=2表示仅对卖出信号过滤;
N=0表示对买入和卖出信号都过滤,返回1,2表示买入或卖出条件成立;
同一K线上只能有一个信号;
例如:
ENTERLONG=TFILTER(买入,卖出,1)
EXITLONG=TFILTER(买入,卖出,2)

BACKSET 向前赋值
属于未来函数,将当前位置到若干周期前的数据设为1.
用法:
 BACKSET(X,N),若X非0,则将当前位置到N周期前的数值设为1.
 例如:
 BACKSET(CLOSE>OPEN,2)若收阳则将该周期及前一周期数值设为1,否则为0

SMA 累积平均
返回累积平均。
用法：　SMA(X，N，M)　X的M日累积平均，M为权重，如Y=(X*M+Y'*(N-M))/N
MA 简单移动平均
返回简单移动平均。
用法：　MA(X，M)　X的M日简单移动平均。

EMA 异同移动平均
返回异同移动平均。
用法：　EMA(X，M)　X的M日异同移动平均。

四　、逻辑函数
CROSS 上穿
两条线交叉。
用法：　CROSS(A，B)　表示当A从下方向上穿过B时返回1，否则返回0。
例如：　CROSS(MA(CLOSE，5)，MA(CLOSE，10))　表示5日均线与10日均线交金金叉。

五　、算术函数
NOT 取反
求逻辑非。
用法：　NOT(X)　返回非X，即当X=0时返回1，否则返回0。
例如：　NOT(ISUP)　表示平盘或收阴。

IF 逻辑判断
根据条件求不不同的值。
用法：　IF(X，A，B)　若X不不为0则返回A，否则返回B。
例如：　IF(CLOSE>OPEN，HIGH，LOW)表示该周期收阳则返回最高
值，否则返回最低值。

MAX 较大值
求最大值。
用法：　MAX(A,B)　返回A和B中的较大值。
例如：　MAX(CLOSE-OPEN，0)　表示若收盘价大于开盘价返回它们的
差值，否则返回0。

MIN 较小值
求最小值。
用法：　MIN(A，B)　返回A和B中的较小值。
例如：　MIN(CLOSE，OPEN)　返回开盘价和收盘价中的较小值。

